<nav class="navbar navbar-expand-md navbar-light bg-white">
    <!-- Brand -->
    <a class="navbar-brand nav-link " href="{{ path('homepage') }}">
        <img alt="Brand logo"
             class="image"
             height="20px"
             width="24px"
             src="{{ asset('build/images/logo.png') }}">
        <span class="name d-none d-sm-inline">MY BICYCLE JOURNEY</span>
        <span class="name d-sm-none">MBJ</span>
    </a>
    <!-- Left elements -->


    <!-- Left elements -->
    <div class="navbar-nav me-auto mb-2 mb-lg-0">
    </div>
    <!-- Left elements -->

    <!-- Right elements -->
    <div class="d-flex align-items-center">
        {% if app.user %}
            <button type="button" class="nav-link btn" disabled>
                {{ 'global.coming_soon'|trans }}
            </button>
        {% else %}
            {{ _self.signup() }}
        {% endif %}
        {{ _self.locale_selector() }}
    </div>
    <!-- Right elements -->
</nav>

{% macro locale_selector() %}
    {% set route = app.request.attributes.get('_route') %}
    {% set route_params = app.request.attributes.get('_route_params') %}
    {% set params = route_params|merge(app.request.query.all) %}

    <div class="nav-item dropdown locale-selector">
        <a
                class="text-reset nav-link dropdown-toggle hidden-arrow"
                href="#"
                role="button"
                data-bs-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                id="dropdown-language"
        >
            <i class="m-0 fs-2 flag flag-{{ app.request.locale|lower }}"></i>
        </a>
        <ul
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdown-language"
                data-popper-placement="null"
                data-mdb-popper="none"
        >
            <li>
                <a class="dropdown-item" href="#">
                    <i class="flag-{{ app.request.locale|lower }} flag"></i>
                    {{ app.request.locale|locale_name(app.request.locale)|u.title }}
                    <i class="fa fa-check text-success ms-2"></i>
                </a>
            </li>
            <li>
                <hr class="dropdown-divider"/>
            </li>
            {% for locale in locales %}
                {% if locale != app.request.locale %}
                    <li>
                        <a class="dropdown-item"
                           href="{{ path(route, params|merge({ _locale: locale })) }}"
                        >
                            <i class="flag flag-{{ locale|lower }}"></i>
                            {{ locale|locale_name(locale)|u.title }}
                        </a>
                    </li>
                {% endif %}
            {% endfor %}
        </ul>
    </div>
{% endmacro %}

{% macro signup() %}
    <div class="nav-item">
        <a href="{{ path('signup') }}" class="signup nav-link">
            {{ 'navbar.signup'|trans }}
        </a>
    </div>
{% endmacro %}